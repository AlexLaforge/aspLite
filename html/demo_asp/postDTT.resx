<form class="ajaxForm" method="post">

	<input type="hidden" name="e" value="postdtt" />
	<input type="hidden" name="postBack" value="true" />
	<input type="hidden" id="btnAction" name="btnAction" value="" />

	<div class="modal-body">
	
		<input type="hidden" value="[iId]" name="iId">
		
		<div class="form-group">
			<label for="exampleFormControlInput1">text</label>
			<input type="text" class="form-control" id="exampleFormControlInput1" maxlength="255" name="sText" value="[sText]" required>
		</div>
		
		<div class="form-group">
			<label for="exampleFormControlInput2">number</label>
			<input type="number" class="form-control" id="exampleFormControlInput2" maxlength="255" name="iNumber" value="[iNumber]" required>
		</div>
		
		<div class="form-group">
		
			<label for="exampleFormControlSelect1">boolean</label>
			
			<select class="form-control" name="bBoolean" id="exampleFormControlSelect1">
				[booleanlist]  
			</select>
		</div>
		
		<div class="form-group">
			<label for="datepicker">date</label>
			<input type="text" class="form-control" id="datepicker" name="dDate" value="[dDate]" required>
		</div>
	 
	</div>

	<div class="modal-footer">
	
		<div id="successAlert" style="display:none;padding:6px 8px" class="alert alert-success" role="alert">Saved!</div>
		<div id="warningAlert" style="display:none;padding:6px 8px" class="alert alert-danger" role="alert">Error! Complete all fields.</div>
		
		<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		<input value="Delete" id="deleteButton" [display] onclick="if(confirm('Are you sure?')){$('#btnAction').val('delete')};"  type="submit" class="btn btn-warning">
		<input value="Save" type="submit" class="btn btn-primary" onclick="$('#btnAction').val('save')">
	</div>

</form>

<script>

	$('#datepicker').datepicker({
		inline: true, 
		dateFormat:"[dateformat]"
	})
	
	$('.ajaxForm').submit(function(e) {
		e.preventDefault()
		aspAjax('POST',aspAjaxUrl,'json',$(this).serialize(),dttSuccess)
	})
	
	function reloadTable() {
		$('#jsExampleSSP').DataTable().ajax.reload(null, false);
	}
	
	function dttSuccess (data) {
	
		if (data.aspL.status=="OK") {
			$('#warningAlert').css("display", "none")
			$('#successAlert').css("display", "block")
			reloadTable()
			}
			
		if (data.aspL.status=="ERR") {
			$('#warningAlert').css("display", "block")
			$('#successAlert').css("display", "none")			
			}
			
		if (data.aspL.status=="DELETE") {
			reloadTable()
			$("#exampleModal").modal('toggle')
		}		
	}	
</script>

