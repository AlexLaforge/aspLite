<script src="js/jszip.min.js"></script>
<script src="js/filesaver.min.js"></script>

<p><strong>JSZip</strong> experiment - <a target="_blank" href="https://stuk.github.io/jszip/">https://stuk.github.io/jszip/</a></p>
<p>Works on firefox, chrome , opera &gt;= 15 and IE &gt;= 10 (but NOT in compatibility view).</p>
<button id="blob" class="btn btn-primary">click to download zip</button>

<script>

var zip = new JSZip()
var i=0
[filelist]

jQuery("#blob").on("click", function () {

	$(this).html('please wait... files are downloaded')
	
	getUrl(urls[i][0],urls[i][1])
		
});

function download() {
	
	$('#blob').html('please wait... files are zipped')

	i=0

	zip.generateAsync({type:"blob"}).then(function (blob) { 
		saveAs(blob, "download.zip")
		$('#blob').html('click to download zip')			
	}, function (err) {console.log('error when creating zip')})

}

function getUrl(url,type) {	
	
	$.ajax({
		url: url,			
		cache:false,
		xhr:function(){	
				
			var xhr = new XMLHttpRequest();
			xhr.responseType= type
			return xhr;
				
		},
		success: function(data){			
			
			if (type=='blob') {zip.file(url, data,{binary: true})}
			else {zip.file(url, data,{binary: false})}		
			
			i++		
			
			if (i==urls.length) {download()}
			else {getUrl(urls[i][0],urls[i][1])}
				
		},
		error:function(){			
			
			i++
			
			if (i==urls.length) {download()}
			else {getUrl(urls[i][0],urls[i][1])}				
		}
	})
}

</script>